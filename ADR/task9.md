# ADR Настройка чтения с реплик и консистентность

## products
|Операция|Реплика|Задержка|Обоснование|
|--|--|--|--|
|Просмотр каталога|secondary|Несколько секунд|Каталог - еще не совсем оферта, риск частого изменения описания минимален|
|Просмотр карточки товара|secondary|Секунда|Это *почти* оферта, риск изменения уже чуть выше|
|Описание товара на странице выписки|primary|-|Это оферта, нужна точная информация о цене и наличии. Строгая консистентность.|

## orders
|Операция|Реплика|Задержка|Обоснование|
|--|--|--|--|
|Список заказов клиента|secondary|Минуты|История заказов — данные, для которых в конечном счете будет достигнута согласованность.|
|Аналитика (например, группировка по категориям товаров за месяц) - как для клиента, так и для внутреннего пользования|secondary|Минуты|Идеальная точность не требуется - гравное тренд, за крайним редким исключением - всплеска на текущий момент.|
|Заказ в процессе оформления, оплаты, изменения|primary|-|Текущий заказ — критически важные данные, требующие строгой консистентности.|

## carts
|Операция|Реплика|Задержка|Обоснование|
|--|--|--|--|
|Все|primary|-|Это то, что *может* стать заказом, станет или нет - зависит от четкости работы коллекции. Максимально строгая консистентность.|